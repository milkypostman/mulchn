// Generated by CoffeeScript 1.4.0
(function() {

  require(['config', 'main'], function() {
    return require(['jquery'], function($) {
      var clone_answer, maxFieldId, newId, _results;
      clone_answer = function(selector, maxId) {
        var curId, elem, id, newId, new_element, new_input, placeholder;
        elem = $(selector);
        new_input = elem.find(":input").clone(true);
        curId = parseInt(new_input.attr("id").replace(/.*-(\d{1,4})/m, "$1"));
        newId = curId + 1;
        if (curId >= maxId) {
          return curId;
        }
        id = new_input.attr("id").replace("-" + curId, "-" + newId);
        placeholder = new_input.attr("placeholder").replace(newId, curId + 2);
        if (!placeholder.endsWith("(optional)")) {
          placeholder += " (optional)";
        }
        new_input.attr({
          name: id,
          id: id,
          placeholder: placeholder
        }).val("");
        new_element = elem.clone(true);
        new_element.html(new_input);
        elem.after(new_element);
        return newId;
      };
      maxFieldId = 4;
      String.prototype.endsWith = function(suffix) {
        return this.indexOf(suffix, this.length - suffix.length) !== -1;
      };
      newId = clone_answer(".answers-input:last", maxFieldId);
      _results = [];
      while (newId < maxFieldId) {
        _results.push(newId = clone_answer(".answers-input:last", maxFieldId));
      }
      return _results;
    });
  });

}).call(this);
